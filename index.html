<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Wordle Proposal ðŸ’š</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
:root{
 --bg:#121213;--tile-bg:#3a3a3c;--tile-border:#565758;
 --green:#538d4e;--yellow:#b59f3b;--gray:#3a3a3c;--text:#fff
}
*{box-sizing:border-box;font-family:Arial,sans-serif}
body{margin:0;background:var(--bg);color:var(--text);display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;overflow:hidden}
h1{margin-bottom:12px;letter-spacing:2px}
.board{display:flex;flex-direction:column;gap:8px;align-items:center}
.row{display:grid;gap:8px;justify-content:center}
.tile{width:62px;height:62px;border:2px solid var(--tile-border);display:flex;align-items:center;justify-content:center;font-size:2rem;font-weight:bold;text-transform:uppercase;background:var(--tile-bg);transform-style:preserve-3d}
.flip{animation:flip .6s ease forwards}
@keyframes flip{0%{transform:rotateX(0)}50%{transform:rotateX(90deg)}100%{transform:rotateX(0)}}
.green{background:var(--green);border-color:var(--green)}
.yellow{background:var(--yellow);border-color:var(--yellow)}
.gray{background:var(--gray);border-color:var(--gray)}
.keyboard{margin-top:16px;display:grid;grid-template-columns:repeat(10,1fr);gap:6px;width:95%;max-width:520px}
.key{padding:10px 0;border-radius:4px;background:#818384;color:#fff;font-weight:bold;text-align:center;font-size:.9rem}
.key.gray{background:var(--gray)}
.key.yellow{background:var(--yellow)}
button{margin-top:16px;padding:10px 18px;font-size:1rem;font-weight:bold;border:none;border-radius:6px;cursor:pointer;background:#538d4e;color:#fff}
.hidden{display:none}
canvas{position:fixed;top:0;left:0;pointer-events:none}
</style>
</head>
<body>
<h1>WORDLE</h1>
<div class="board" id="board"></div>
<div class="keyboard" id="keyboard"></div>
<button id="answerBtn" class="hidden">ANSWER</button>
<canvas id="confetti"></canvas>

<script>
const board = document.getElementById('board')
const keyboard = document.getElementById('keyboard')
const answerBtn = document.getElementById('answerBtn')

// ================= KEYBOARD =================
const letters='QWERTYUIOPASDFGHJKLZXCVBNM'.split('')
const keys = {}
letters.forEach(l=>{
  const k = document.createElement('div')
  k.className='key'
  k.textContent=l
  keyboard.appendChild(k)
  keys[l]=k
})

// ================= GAME STATE =================
const WORD_LENGTH=5
const MAX_ROWS=6
let currentRow=0,currentCol=0
let gameOver=false
const valentineLetters = new Set('VALENTINE'.split(''))
const guessRows=[]

// ================= BUILD INITIAL GRID =================
for(let r=0;r<MAX_ROWS;r++){
 const row = document.createElement('div')
 row.className='row'
 row.style.gridTemplateColumns='repeat(5,62px)'
 const tiles = []
 for(let c=0;c<WORD_LENGTH;c++){
   const t=document.createElement('div')
   t.className='tile'
   row.appendChild(t)
   tiles.push(t)
 }
 board.appendChild(row)
 guessRows.push(tiles)
}

// ================= INPUT =================
document.addEventListener('keydown', e=>{
 if(gameOver) return
 if(e.key==='Backspace' && currentCol>0){currentCol--;guessRows[currentRow][currentCol].textContent='';return}
 if(e.key==='Enter' && currentCol===WORD_LENGTH){submitGuess();return}
 if(/^[a-zA-Z]$/.test(e.key) && currentCol<WORD_LENGTH){
   guessRows[currentRow][currentCol].textContent=e.key.toUpperCase()
   currentCol++
 }
})

// ================= GUESS LOGIC =================
function submitGuess(){
 guessRows[currentRow].forEach((tile,i)=>{
   const letter=tile.textContent
   setTimeout(()=>{
     tile.classList.add('flip')
     if(valentineLetters.has(letter)){
       tile.classList.add('yellow')
       keys[letter]?.classList.add('yellow')
     } else {
       tile.classList.add('gray')
       keys[letter]?.classList.add('gray')
     }
   }, i*120)
 })
 currentRow++
 currentCol = 0
 if(currentRow===MAX_ROWS){
   gameOver=true
   setTimeout(revealProposal, 1200)
 }
}

// ================= PROPOSAL REVEAL =================
function revealProposal(){
    board.innerHTML = ''
    const proposal = ['WILL','YOU','BE','MY','VALENTINE']
    let delay = 0

    proposal.forEach((word, r) => {
        const row = document.createElement('div')
        row.className = 'row'
        row.style.gridTemplateColumns = `repeat(${word.length},62px)`
        board.appendChild(row)

        // reveal letters one by one
        word.split('').forEach((l, i) => {
            const t = document.createElement('div')
            t.className = 'tile green'
            t.textContent = '' // start empty
            row.appendChild(t)

            // stagger letter display
            setTimeout(() => {
                t.textContent = l
                t.classList.add('flip')
            }, delay)

            delay += 120
        })
    })

    // show ANSWER button after all letters are animated
    setTimeout(() => {
        answerBtn.classList.remove('hidden')
    }, delay + 300)
}


// ================= ANSWER BUTTON =================
answerBtn.onclick = ()=>{
 // redirect to YES page
 window.location.href = 'yes.html'
}

// ================= CONFETTI (optional for proposal) =================
const canvas=document.getElementById('confetti'), ctx=canvas.getContext('2d')
let conf=[]
function resize(){canvas.width=innerWidth; canvas.height=innerHeight}
addEventListener('resize', resize); resize()
function startConfetti(){
 for(let i=0;i<180;i++){
   conf.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height-canvas.height,r:Math.random()*6+4,d:Math.random()*5+2,c:`hsl(${Math.random()*360},100%,50%)`})
 }
 animate()
}
function animate(){
 ctx.clearRect(0,0,canvas.width,canvas.height)
 conf.forEach(p=>{
   ctx.beginPath()
   ctx.fillStyle=p.c
   ctx.arc(p.x,p.y,p.r,0,Math.PI*2)
   ctx.fill()
   p.y += p.d
   if(p.y>canvas.height)p.y=-10
 })
 requestAnimationFrame(animate)
}
</script>
</body>
</html>